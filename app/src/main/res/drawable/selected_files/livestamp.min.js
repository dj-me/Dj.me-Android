// Livestamp.js / v1.1.2 / (c) 2012 Matt Bradley / MIT License
(function(a,b){var c=1e3,d=!1,e=a([]),f=function(c,d){var f=c.data("livestampdata");"number"==typeof d&&(d*=1e3),c.removeAttr("data-livestamp").removeData("livestamp"),d=b(d),b.isMoment(d)&&!isNaN(+d)&&(f=a.extend({},{original:c.contents()},f),f.moment=b(d),c.data("livestampdata",f).empty(),e.push(c[0]))},g=function(){d||(h.update(),setTimeout(g,c))},h={update:function(){a("[data-livestamp]").each(function(){var b=a(this);f(b,b.data("livestamp"))});var c=[];e.each(function(){var d=a(this),e=d.data("livestampdata");if(void 0===e)c.push(this);else if(b.isMoment(e.moment)){var f=d.html(),e=e.moment.fromNow();if(f!=e){var g=a.Event("change.livestamp");d.trigger(g,[f,e]),g.isDefaultPrevented()||d.html(e)}}}),e=e.not(c)},pause:function(){d=!0},resume:function(){d=!1,g()},interval:function(a){if(void 0===a)return c;c=a}},i={add:function(c,d){return"number"==typeof d&&(d*=1e3),d=b(d),b.isMoment(d)&&!isNaN(+d)&&(c.each(function(){f(a(this),d)}),h.update()),c},destroy:function(b){return e=e.not(b),b.each(function(){var c=a(this),d=c.data("livestampdata");if(void 0===d)return b;c.html(d.original?d.original:"").removeData("livestampdata")}),b},isLivestamp:function(a){return void 0!==a.data("livestampdata")}};a.livestamp=h,a(function(){h.resume()}),a.fn.livestamp=function(a,b){return i[a]||(b=a,a="add"),i[a](this,b)}})(jQuery,moment);